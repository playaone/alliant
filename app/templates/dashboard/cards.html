{% extends 'dashboard/layout.html' %}
{% block content %}
    <main
      class="w-full px-6 pb-6 pt-[100px] sm:pt-[156px] xl:px-[48px] xl:pb-[48px]"
    >
      <!-- write your code here-->
      <div class="2xl:flex 2xl:space-x-[48px]">
        <div class="2xl:w-[424px]">
          <div
            class="mb-[48px] w-full rounded-xl bg-white px-7 py-11 dark:bg-darkblack-600"
          >
            <div
              class="rounded-lg border border-bgray-300 p-8 pb-12 dark:border-darkblack-400"
            >
              <h3
                class="text-2xl font-semibold text-bgray-900 dark:text-white"
              >
                Total Balance
              </h3>
              <h2
                class="mb-2 font-poppins text-4xl font-bold text-bgray-900 dark:text-white"
              >
                ${{ current_user.accounts | sum(attribute='balance') | currency}}
                <span
                  class="text-base font-medium uppercase text-bgray-500"
                  >USD</span
                >
              </h2>
              <div class="flex gap-4">
              </div>
            </div>
            <div class="-mt-6 flex justify-center">
              <button
                class="rounded-lg border border-bgray-500 bg-white px-6 py-3 text-sm font-medium text-bgray-600 dark:bg-darkblack-600 dark:text-white"
              >
                {{ current_user.lastname}} {{ current_user.firstname }}
              </button>
            </div>
            <button
              class="mt-14 w-full rounded-lg bg-success-300 py-4 font-bold text-white transition-all hover:bg-success-400"
            >
              Apply For Card
            </button>
          </div>
        </div>
        <div class="2xl:flex-1">
          <div class="w-full xl:flex xl:space-x-[24px]">

            <div
              class="mb-12 hidden flex-1 rounded-lg bg-white dark:bg-darkblack-600 xl:block"
            >
              <div
                class="flex items-center justify-between border-b border-bgray-300 px-5 py-3 dark:border-darkblack-400"
              >
                <h3
                  class="text-xl font-bold text-bgray-900 dark:text-white"
                >
                  My Accounts
                </h3>
              </div>
              <div class="px-[55px] py-6">
                <div class="w-full overflow-x-scroll">
                  <table class="w-full">
                    <tbody>
                      {% for account in current_user.accounts %}
                        <tr class="bg-white dark:bg-darkblack-600">
                          <td class="whitespace-nowrap rounded-l-lg p-4 text-sm font-medium">
                            {% if account.is_active %}
                            <span>
                              <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                  d="M12.0001 17.75L5.82808 20.995L7.00708 14.122L2.00708 9.25495L8.90708 8.25495L11.9931 2.00195L15.0791 8.25495L21.9791 9.25495L16.9791 14.122L18.1581 20.995L12.0001 17.75Z"
                                  fill="#F6A723" stroke="#F6A723" stroke-linecap="round" stroke-linejoin="round" />
                              </svg>
                            </span>
                            {% endif %}
                          </td>
                          <td class="w-[400px] whitespace-nowrap py-4 text-sm text-gray-500 lg:w-auto">
                            <div class="flex items-center gap-5">
                              <div class="flex-1">
                                <h4 class="text-lg font-bold text-bgray-900 dark:text-white">
                                  {{ account.type }} - {{ account.account_number }}
                                </h4>
                                <div>
                                  <span class="text-base font-medium text-bgray-700 dark:text-bgray-50">{{ account.cards | length }} cards â€¢
                                  </span><span class="text-gray-500">${{ account.balance | currency}}</span>
                                  <span class="text-gray-500">{{ account.status }}</span>
                                </div>
                              </div>
                            </div>
                          </td>
                          <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">
                            <a href=""
                              class="ml-6 flex items-center justify-center rounded-xl bg-success-300 px-11 py-3 font-semibold text-white transition duration-300 ease-in-out hover:bg-success-400">
                              Block
                            </a>
                          </td>
                        </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <!--list table-->
        </div>
      </div>
      <!-- write your code here-->
    </main>
{% endblock %}